/*! For license information please see main.mjs.LICENSE.txt */
var e={225:e=>{const t=(e,t,r,i,n,o)=>{e>1&&t>1&&r[e-1]===i[t-2]&&r[e-2]===i[t-1]&&(n[e][t]=Math.min.apply(null,[n[e][t],n[e-2][t-2]+o]))},r=(e,r)=>{if(null==e||null==r||"string"!=typeof e||"string"!=typeof r)return-1;let i=((e,t)=>{if(null==e||null==t)return null;let r=[];for(let t=0;t<=e.length;t++)r[t]=[],r[t][0]=t;for(let e=0;e<=t.length;e++)r[0][e]=e;return r})(e,r);if(null===i)return-1;for(var n=1;n<=e.length;n++){let o;for(let a=1;a<=r.length;a++)o=e.charAt(n-1)===r.charAt(a-1)?0:1,i[n][a]=Math.min.apply(null,[i[n-1][a]+1,i[n][a-1]+1,i[n-1][a-1]+o]),t(n,a,e,r,i,o)}return i[e.length][r.length]};e.exports={distanceProm:(e,t)=>new Promise(((i,n)=>{let o=r(e,t);0<=o?i(o):n(o)})),distance:r,minDistanceProm:(e,t)=>new Promise(((i,n)=>{if(null==t||!Array.isArray(t))return void n(-1);if(0===t.length)return void i(r(e,""));let o=-2;t.forEach((t=>{let i=r(e,t);(-2===o||i<o)&&(o=i)})),0<=o?i(o):n(o)}))}},381:(e,t,r)=>{!function(){function i(e){return!("number"!=typeof e||e!=e||e===1/0||e===-1/0)}function n(e){return"number"==typeof e&&Math.abs(e)<=9007199254740991}"object"==typeof self&&self.self===self&&self||"object"==typeof r.g&&r.g.global===r.g&&r.g;var o=/(hundred|thousand|(m|b|tr|quadr)illion)$/,a=/teen$/,s=/y$/,l=/(zero|one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve)$/,u={zero:"zeroth",one:"first",two:"second",three:"third",four:"fourth",five:"fifth",six:"sixth",seven:"seventh",eight:"eighth",nine:"ninth",ten:"tenth",eleven:"eleventh",twelve:"twelfth"};function c(e){return o.test(e)||a.test(e)?e+"th":s.test(e)?e.replace(s,"ieth"):l.test(e)?e.replace(l,m):e}function m(e,t){return u[t]}var h=1e3,f=1e6,p=1e9,d=1e12,w=1e15,g=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],b=["zero","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];function v(e,t){var r,o=parseInt(e,10);if(!i(o))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");if(!n(o))throw new RangeError("Input is not a safe number, it’s either too large or too small.");return r=function e(t){var r,i,n=arguments[1];return 0===t?n?n.join(" ").replace(/,$/,""):"zero":(n||(n=[]),t<0&&(n.push("minus"),t=Math.abs(t)),t<20?(r=0,i=g[t]):t<100?(r=t%10,i=b[Math.floor(t/10)],r&&(i+="-"+g[r],r=0)):t<h?(r=t%100,i=e(Math.floor(t/100))+" hundred"):t<f?(r=t%h,i=e(Math.floor(t/h))+" thousand,"):t<p?(r=t%f,i=e(Math.floor(t/f))+" million,"):t<d?(r=t%p,i=e(Math.floor(t/p))+" billion,"):t<w?(r=t%d,i=e(Math.floor(t/d))+" trillion,"):t<=9007199254740992&&(r=t%w,i=e(Math.floor(t/w))+" quadrillion,"),n.push(i),e(r,n))}(o),t?c(r):r}var y={toOrdinal:function(e){var t=parseInt(e,10);if(!i(t))throw new TypeError("Not a finite number: "+e+" ("+typeof e+")");if(!n(t))throw new RangeError("Input is not a safe number, it’s either too large or too small.");var r=String(t),o=Math.abs(t%100),a=11<=o&&o<=13,s=r.charAt(r.length-1);return r+(a?"th":"1"===s?"st":"2"===s?"nd":"3"===s?"rd":"th")},toWords:v,toWordsOrdinal:function(e){return c(v(e))}};e.exports&&(t=e.exports=y),t.numberToWords=y}()},862:(e,t,r)=>{e.exports={toArabic:r(993),toRoman:r(24)}},993:e=>{Array.prototype.forEach,e.exports=function(e){if("string"!=typeof e&&!(e instanceof String))throw new TypeError("toArabic expects a string");if(/^nulla$/i.test(e)||!e.length)return 0;if(!(e=e.toUpperCase().match(/^(M{0,3})(CM|DC{0,3}|CD|C{0,3})(XC|LX{0,3}|XL|X{0,3})(IX|VI{0,3}|IV|I{0,3})$/)))throw new Error("toArabic expects a valid roman number");var t=0;return t+=1e3*e[1].length,"CM"===e[2]?t+=900:"CD"===e[2]?t+=400:t+=100*e[2].length+("D"===e[2][0]?400:0),"XC"===e[3]?t+=90:"XL"===e[3]?t+=40:t+=10*e[3].length+("L"===e[3][0]?40:0),"IX"===e[4]?t+=9:"IV"===e[4]?t+=4:t+=1*e[4].length+("V"===e[4][0]?4:0),t}},24:e=>{!function(){function t(e,t,r,i){var n="";switch(e){case 0:return n;case 9:return t+i;case 4:return t+r}for(e>=5&&(n=r,e-=5);e-- >0;)n+=t;return n}e.exports=function(e){if(e instanceof Number&&(e=parseInt(e,10)),("string"==typeof e||e instanceof String)&&(e=parseInt(e,10),isNaN(e)))throw new TypeError("toArabic expects a number");if("number"!=typeof e)throw new TypeError("toArabic expects a number");if(isNaN(e))throw new TypeError("toArabic expects a real number");if(e<0)throw new Error("toArabic cannot express negative numbers");if(e>3999)throw new Error("toArabic cannot express numbers over 3999");if(0===e)return"nulla";var r="";return r+=t(Math.floor(e/1e3),"M","",""),e%=1e3,r+=t(Math.floor(e/100),"C","D","M"),e%=100,(r+=t(Math.floor(e/10),"X","L","C"))+t(e%=10,"I","V","X")}}()}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var i=r(225);const n={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},o={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},a="[aeiouy]",s="([^aeiou][^aeiouy]*)",l="("+a+"[aeiou]*)",u=new RegExp("^"+s+"?"+l+s),c=new RegExp("^"+s+"?"+l+s+l+"?$"),m=new RegExp("^"+s+"?("+l+s+"){2,}"),h=new RegExp("^"+s+"?"+a),f=new RegExp("^"+s+a+"[^aeiouwxy]$"),p=/ll$/,d=/^(.+?)e$/,w=/^(.+?)y$/,g=/^(.+?(s|t))(ion)$/,b=/^(.+?)(ed|ing)$/,v=/(at|bl|iz)$/,y=/^(.+?)eed$/,x=/^.+?[^s]s$/,A=/^.+?(ss|i)es$/,M=/([^aeiouylsz])\1$/,j=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,k=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,z=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;function $(e){let t=String(e).toLowerCase();if(t.length<3)return t;let r,i=!1;return 121===t.codePointAt(0)&&(i=!0,t="Y"+t.slice(1)),A.test(t)?t=t.slice(0,-2):x.test(t)&&(t=t.slice(0,-1)),(r=y.exec(t))?u.test(r[1])&&(t=t.slice(0,-1)):(r=b.exec(t))&&h.test(r[1])&&(t=r[1],v.test(t)?t+="e":M.test(t)?t=t.slice(0,-1):f.test(t)&&(t+="e")),(r=w.exec(t))&&h.test(r[1])&&(t=r[1]+"i"),(r=j.exec(t))&&u.test(r[1])&&(t=r[1]+n[r[2]]),(r=k.exec(t))&&u.test(r[1])&&(t=r[1]+o[r[2]]),(r=z.exec(t))?m.test(r[1])&&(t=r[1]):(r=g.exec(t))&&m.test(r[1])&&(t=r[1]),(r=d.exec(t))&&(m.test(r[1])||c.test(r[1])&&!f.test(r[1]))&&(t=r[1]),p.test(t)&&m.test(t)&&(t=t.slice(0,-1)),i&&(t="y"+t.slice(1)),t}function P(e,t,r,n,o){let a=0;for(const s of e){let e=!1;for(;a<t.length;){const l=t[a];a++;const u=o?(0,i.distance)($(s),$(l)):(0,i.distance)(s,l);if(r>0&&r*u<=l.length){e=!0;break}if(n&&l.includes(s)){e=!0;break}if(0===u){e=!0;break}}if(!e)return!1}return!0}function E(e){const t=C(e).split(" ");return I(e=e.split(" ").filter((e=>e.length>0)).filter((e=>e.match(/<\/?u>/)||t.includes(e))).reduce(((e,t)=>e+t+" "),"").trim())}function O(e){const t=e.match(/"[^"]*(?=["])/g)?.map((e=>e.slice(1)));return I(t?t.reduce(((e,t)=>e+" "+t),"").trim():e)}function C(e){const t=e.match(/<u>[^<]*(?=<\/u>)/g)?.map((e=>e.slice(3)));return I(t?t.reduce(((e,t)=>e+t+" "),"").trim():e)}function I(e){return e.replace(/<[^>]*>/g,"")}function W(e){return e.replace(/[.,!;:'"\\/?@#$%^&*_~’]/g,"")}const q={hydrogen:["h"],helium:["he"],lithium:["li"],beryllium:["be"],boron:["b"],carbon:["c"],nitrogen:["n"],oxygen:["o"],fluorine:["f"],neon:["ne"],sodium:["na"],magnesium:["mg"],aluminum:["al"],silicon:["si"],phosphorus:["p"],sulfur:["s"],chlorine:["cl"],argon:["ar"],potassium:["k"],calcium:["ca"],scandium:["sc"],titanium:["ti"],vanadium:["v"],chromium:["cr"],manganese:["mn"],iron:["fe"],cobalt:["co"],nickel:["ni"],copper:["cu"],zinc:["zn"],gallium:["ga"],germanium:["ge"],arsenic:["as"],selenium:["se"],bromine:["br"],krypton:["kr"],rubidium:["rb"],strontium:["sr"],yttrium:["y"],zirconium:["zr"],niobium:["nb"],molybdenum:["mo"],technetium:["tc"],ruthenium:["ru"],rhodium:["rh"],palladium:["pd"],silver:["ag"],cadmium:["cd"],indium:["in"],tin:["sn"],antimony:["sb"],tellurium:["te"],iodine:["i"],xenon:["xe"],cesium:["cs"],barium:["ba"],lanthanum:["la"],cerium:["ce"],praseodymium:["pr"],neodymium:["nd"],promethium:["pm"],samarium:["sm"],europium:["eu"],gadolinium:["gd"],terbium:["tb"],dysprosium:["dy"],holmium:["ho"],erbium:["er"],thulium:["tm"],ytterbium:["yb"],lutetium:["lu"],hafnium:["hf"],tantalum:["ta"],tungsten:["w"],rhenium:["re"],osmium:["os"],iridium:["ir"],platinum:["pt"],gold:["au"],mercury:["hg"],thallium:["tl"],lead:["pb"],bismuth:["bi"],polonium:["po"],astatine:["at"],radon:["rn"],francium:["fr"],radium:["ra"],actinium:["ac"],thorium:["th"],protactinium:["pa"],uranium:["u"],neptunium:["np"],plutonium:["pu"],americium:["am"],curium:["cm"],berkelium:["bk"],californium:["cf"],einsteinium:["es"],fermium:["fm"],mendelevium:["md"],nobelium:["no"],lawrencium:["lr"],rutherfordium:["rf"],dubnium:["db"],seaborgium:["sg"],bohrium:["bh"],hassium:["hs"],meitnerium:["mt"],darmstadtium:["ds"],roentgenium:["rg"],copernicium:["cn"],nihonium:["nh"],flerovium:["fl"],moscovium:["mc"],livermorium:["lv"],tennessine:["ts"],oganesson:["og"],"atomic bombs":["atomic weapons","nuclear bombs","nuclear weapons","nukes","fission bombs","A-bombs"],"nuclear weapons":["atomic bombs","atomic weapons","nuclear bombs","nukes","fission bombs","A-bombs"],nukes:["atomic bombs","atomic weapons","nuclear bombs","nuclear weapons","fission bombs","A-bombs"],fairytales:["fairy tales"],"fairy tales":["fairytales"],house:["home","dwelling","residence"],mouse:["mice"],rail:["railroad"],railroad:["rail"],"nineteen eighty-four":["1984","nineteen eighty four"],"nineteen eighty four":["1984","nineteen eighty-four"],"oxidation number":["oxidation state"],"oxidation state":["oxidation number"],"ralph vaughan-williams":["rvw"],spacewalk:["space walk"],spacewalks:["space walk"],"sugar cane":["sugarcane"],sugarcane:["sugar cane"],wavefunction:["wave function"],"Gulf of Mexico":["Gulf of America"],"wave function":["wavefunction"],"world war 1":["first world war","great war","world war i","world war one"],"world war i":["first world war","great war","world war 1","world war one"],"world war one":["first world war","great war","world war 1","world war i"],"world war ii":["ww2","wwii","world war 2","world war two","second world war"],"world war two":["ww2","wwii","world war ii","world war 2","second world war"],"world war 2":["ww2","wwii","world war ii","world war two","second world war"],"Kanye West":["kayne","west"],superconductors:["super conductors","super conductor"],"baha' i":["bahai"],"united states of america":["united states","usa","us","america"],"the united states of america":["united states","usa","us","america"],usa:["united states","us","america"]};function N(e,t){if(/-/.test(e))return[...N(e.replace(/-/g," "),t),...N(e.replace(/-/g,""),t)];const r=[I(e),C(e),E(e),O(e)];if(t)for(const t of[e,C(e)]){const e=t.split(" ").filter((e=>e.length>0)).map((e=>I(e).charAt(0))).reduce(((e,t)=>e+t),"").trim();e.length>1&&r.push(e)}return r[0]in q&&r.push(...q[r[0]]),r.map((e=>W(e)))}const T={accept:["accept","or","antiprompt on","anti-prompt on","antiprompt","anti-prompt"],prompt:["prompt on","prompt"],reject:["reject","do not accept or prompt on","do not accept","do not prompt on","do not prompt"]},X=Object.values(T).flat(),R={"accept either":["accept either","accept any"],"prompt on partial":["prompt on partial","prompt on a partial","prompt on either"]};function D(e){for(const t of Object.keys(T))for(const r of T[t])if(e.startsWith(r))return{directive:t,clause:e=e.replace(r,"").trim()};return{directive:"accept",clause:e}}function F(e){for(const t of["by asking","with"]){const r=e.indexOf(t);if(!(r<0))return{directedPrompt:O(e.slice(r+t.length)),clause:e=e.slice(0,r).trim()}}return{clause:e}}var L=r(381),S=r(862);const{toWords:V}=L,B={сontainor:"container",сontainors:"containers",сontains:"contains",contentinal:"continental",évaluate:"evaluate",mittani:"mitanni",ludmilla:"lyudmila",grandma:"grandmother",grandpa:"grandfather",sulayman:"solomon"},G={"1st":"first","2nd":"second","3rd":"third","4th":"fourth","5th":"fifth","6th":"sixth","7th":"seventh","8th":"eighth","9th":"ninth","10th":"tenth","11th":"eleventh","12th":"twelfth","13th":"thirteenth","14th":"fourteenth","15th":"fifteenth","16th":"sixteenth","17th":"seventeenth","18th":"eighteenth","19th":"nineteenth","20th":"twentieth","30th":"thirtieth","40th":"fortieth","50th":"fiftieth","60th":"sixtieth","70th":"seventieth","80th":"eightieth","90th":"ninetieth"},H={dr:"doctor",st:"saint",mr:"mister",mrs:"missus",ms:"miss",esq:"esquire",jr:"junior",sr:"senior",rev:"reverend",fr:"father",prof:"professor",hon:"honorable",pres:"president",vp:"vice president",gov:"governor",ofc:"officer",pr:"pastor",br:"brother",rep:"representative",Mme:"Madame",Mlle:"Mademoiselle",Hr:"Herr",Fr:"Frau"},J={kg:"kilogram",mol:"mole",cd:"candela",Hz:"hertz",Pa:"pascal",rad:"radian",W:"watt",J:"joule",V:"volt",Wb:"weber",F:"farad",Ohm:"ohm",Ω:"ohm",kat:"katal",lm:"lumen",lx:"lux",Bq:"becquerel",Gy:"gray",Sv:"sievert",in:"inch",ft:"foot",yd:"yard",mi:"mile",nmi:"nautical mile",sqmi:"square mile",gal:"gallon",qt:"quart",pt:"pint",cup:"cup"},K={colour:"color",flavour:"flavor",humour:"humor",labour:"labor",neighbour:"neighbor",odour:"odor",organize:"organise",leukaemia:"leukemia",manoeuvre:"maneuver",oestrogen:"estrogen",paediatric:"pediatric"},U={muhammed:"muhammad",muhamad:"muhammad",mohammad:"muhammad",mohammed:"muhammad",mahammad:"muhammad",maxammed:"muhammad",mehemmed:"muhammad",mohamad:"muhammad",mohamed:"muhammad"};function Y(e){try{e=(0,S.toArabic)(e)}catch(t){if("toArabic expects a valid roman number"===t.message||t instanceof TypeError)return e;throw t}return V(e)}function _(e,t=!1){const r=e.split(" ").filter((e=>e.length>0));for(let e=0;e<=r.length-1;e++)Object.prototype.hasOwnProperty.call(G,r[e])&&(r[e]=G[r[e]]),Object.prototype.hasOwnProperty.call(H,r[e])&&(r[e]=H[r[e]]),Object.prototype.hasOwnProperty.call(J,r[e])&&(r[e]=J[r[e]]),Object.prototype.hasOwnProperty.call(K,r[e])&&(r[e]=K[r[e]]),Object.prototype.hasOwnProperty.call(B,r[e])&&(r[e]=B[r[e]]),Object.prototype.hasOwnProperty.call(U,r[e])&&(r[e]=U[r[e]]),r[e].endsWith("s")&&r[e].length>1&&isFinite(r[e].at(-2))&&(r[e]=r[e].slice(0,-1)),r[e]=Y(r[e]),isFinite(r[e])&&(r[e]=parseInt(r[e]),r[e]=r[e]<=100?V(r[e]):r[e].toString());return r.sort()}function Q(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\(s\)/g,"s").replace(/["“‟❝”❞]/g,'"').replace(/[\u2018-\u201B]/g,"'").replace(/\p{Pd}/gu,"-").replace(/[\u00B7\u22C5\u2027]/g,"").replace(/<\/?i>/g,"")}const Z=function(e,t,r=7,i=!1){if("string"!=typeof e||"string"!=typeof t)return{directive:"reject",directedPrompt:void 0};if(""===e||""===t)return{directive:"reject",directedPrompt:void 0};("number"!=typeof r||r<0)&&(r=7),/<b>/.test(e)&&!/<u>/.test(e)&&(e=e.replace(/<b>/g,"<u>").replace(/<\/b>/g,"</u>"));const n=/<u>/.test(e);e=Q(e);const o=_(t=W(t=Q(t)),!0),a=function(e){const t=e.replace(/\([^)]*\)/g,"").replace(/\[[^\]]*\]/g,"");let r=e.match(/\[[^\]]*(?=\])/g)??[];r=r.map((e=>e.slice(1)));let i=e.match(/\([^)]*(?=\))/g)??[];return i=i.map((e=>e.slice(1))),r=r.filter((e=>X.some((t=>e.startsWith(t))))),i=i.filter((e=>X.some((t=>e.startsWith(t))))),[t,...r,...i]}(e).flatMap(((e,t)=>function(e,t){const r=e.split(";").map((e=>e.trim())),i=t?/,? or /:/,? or |, /,n=[];for(let e of r){let r,o;({directive:r,clause:e}=D(e)),"prompt"===r&&({directedPrompt:o,clause:e}=F(e));let a=e.split(i);a=a.map((e=>e.trim())).filter((e=>e.length>0)),n.push({directive:r,formattedAnswers:a,directedPrompt:o,isMainAnswer:t})}return n}(e,0===t))),s=a[0].formattedAnswers[0];if(!n&&s?.length>1&&1===t.length&&isNaN(t))return{directive:"reject"};for(const t of function(e){const t=[];for(const r of Object.keys(R))for(const i of R[r])e.includes(i)&&t.push(r);return t}(e))"accept either"===t&&a.push({directive:"accept",formattedAnswers:s.split(" ")}),"prompt on partial"===t&&a.push({directive:"prompt",formattedAnswers:s.split(" ")});a.sort(((e,t)=>("reject"===e.directive?-1:1)-("reject"===t.directive?-1:1)));for(const{directive:e,formattedAnswers:i,directedPrompt:s,isMainAnswer:l}of a)for(const a of i)for(const i of N(a,l)){if(""===i)continue;const a=_(i,!0);let l;if(l="reject"===e?i===t:P(n?a:o,n?o:a,r,!n,!0),l)return{directive:e,directedPrompt:s}}return{directive:"reject"}};export{Z as default};
//# sourceMappingURL=main.mjs.map